{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;;;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AChCA;AACwC;AACI;AAC5C;AACe,yBAAyB,0DAAS;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA,QAAQ,qDAAM;AACd;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,YAAY,qDAAM;AAClB;AACA,sBAAsB,wBAAwB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+BAA+B;AAC/C;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtGwC;AACxC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uCAAuC;AACzF,kDAAkD,uCAAuC;AACzF,iDAAiD,sCAAsC;AACvF,qDAAqD,oCAAoC;AACzF,kDAAkD,gCAAgC;AAClF,oDAAoD,yCAAyC;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA,kDAAkD,sCAAsC;AACxF;AACA;AACA,+BAA+B,sCAAsC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,sCAAsC;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACnLe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvLiD;AACjD;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,4DAAY;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,4DAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvH8B;AACmB;AACjD;AACe,iBAAiB,+CAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,iCAAiC,4DAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC1EgC;AACQ;AACxC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,kDAAI;AAC3E;AACA;AACA;AACA;AACA;AACA,YAAY,qDAAM;AAClB;AACA;AACA;AACA,aAAa;AACb;AACA,YAAY,qDAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrGiD;AACjD;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,4DAAY;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC,4BAA4B,eAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9Fe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7BwC;AACxC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,KAAK;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA,8BAA8B,iBAAiB;AAC/C,iGAAiG,IAAI,GAAG,IAAI;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kDAAkD;AAClE,yEAAyE,KAAK;AAC9E;AACA,6EAA6E,WAAW;AACxF;AACA,SAAS;AACT;AACA,6EAA6E,KAAK;AAClF;AACA,SAAS;AACT;AACA;AACA;AACA,gBAAgB,4DAA4D;AAC5E,yEAAyE,uBAAuB;AAChG,uEAAuE,YAAY;AACnF;AACA;AACA;AACA;AACA,2EAA2E,KAAK;AAChF;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yEAAyE,WAAW;AACpF;AACA,+DAA+D,mCAAmC;AAClG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,mCAAmC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,IAAI;AAC/E,2CAA2C,MAAM;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,YAAY;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yEAAyE,mBAAmB;AAC5F;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA,4DAA4D,8BAA8B;AAC1F,4BAA4B,cAAc;AAC1C,gEAAgE,iCAAiC;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qCAAqC;AACjE,4BAA4B,oCAAoC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,iBAAiB;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,WAAW;AAC1F;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACjR+C;AACW;AACpB;AACF;AACM;AACJ;AACa;AACnB;AACkC;AAClE;AACe;AACf;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wDAAQ;AACnC;AACA;AACA,+BAA+B,4DAAS;AACxC,+BAA+B,4DAAS;AACxC,+BAA+B,kEAAc;AAC7C,4BAA4B,sDAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sDAAM;AACpC,iCAAiC,mDAAU;AAC3C,cAAc;AACd,8BAA8B,wDAAE;AAChC;AACA;AACA,sDAAsD;AACtD,yBAAyB,+DAAU;AACnC;AACA;AACA,4BAA4B,gDAAO;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,+BAA+B,sEAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;;;;;;;;;;;;;;;AChHwC;AACxC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAM;AACd,QAAQ,qDAAM;AACd;AACA,QAAQ,qDAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,mBAAmB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,yEAAyE,iBAAiB;AAC1F;AACA;AACA,+EAA+E,YAAY;AAC3F;AACA,SAAS;AACT;AACA;AACA;AACA,iFAAiF,mBAAmB;AACpG;AACA;AACA;AACA;AACA,iFAAiF,iBAAiB;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY;AAC/D;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtIA;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;;;;ACjBP;AACf;AACA;;;;;;;UCFA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACNgC;AACH;AACuC;AACpE;AACA,yEAAkB","sources":["webpack://battleships-game/./src/components/Battleship/AbstractGamePhase.js","webpack://battleships-game/./src/components/Battleship/ActivePhase.js","webpack://battleships-game/./src/components/Controller/GameDisplayManager.js","webpack://battleships-game/./src/components/Gameboard/gameboard.js","webpack://battleships-game/./src/components/Player/AiBrains.js","webpack://battleships-game/./src/components/Player/AiPlayer.js","webpack://battleships-game/./src/components/Player/Player.js","webpack://battleships-game/./src/components/Randomizer/ShipRandomizer.js","webpack://battleships-game/./src/components/Ship/ship.js","webpack://battleships-game/./src/components/UI/BoardUI.js","webpack://battleships-game/./src/components/UI/StartScreenManager.js","webpack://battleships-game/./src/components/UI/passDevice.js","webpack://battleships-game/./src/styles/reset-css.css?d1ae","webpack://battleships-game/./src/styles/styles.css?e4e9","webpack://battleships-game/./src/utils/PubSub.js","webpack://battleships-game/./src/utils/randomNum.js","webpack://battleships-game/webpack/bootstrap","webpack://battleships-game/webpack/runtime/define property getters","webpack://battleships-game/webpack/runtime/hasOwnProperty shorthand","webpack://battleships-game/webpack/runtime/make namespace object","webpack://battleships-game/./src/index.js"],"sourcesContent":["export default class AbstractGamePhase {\r\n    players = {\r\n        activePlayer: null,\r\n        inactivePlayer: null,\r\n    };\r\n\r\n    constructor(player1, player2) {\r\n        this.player1 = player1;\r\n        this.player2 = player2;\r\n        this.#initPlayers(player1, player2);\r\n    }\r\n\r\n    get activePlayer() {\r\n        return this.players.activePlayer;\r\n    }\r\n\r\n    set activePlayer(player) {\r\n        this.players.activePlayer = player;\r\n    }\r\n\r\n    get inactivePlayer() {\r\n        return this.players.inactivePlayer;\r\n    }\r\n\r\n    set inactivePlayer(player) {\r\n        this.players.inactivePlayer = player;\r\n    }\r\n\r\n    #initPlayers(player1, player2) {\r\n        this.activePlayer = player1;\r\n        this.inactivePlayer = player2;\r\n    }\r\n}\r\n","/* eslint-disable consistent-return */\r\nimport pubsub from \"../../utils/PubSub\";\r\nimport GamePhase from \"./AbstractGamePhase\";\r\n\r\nexport default class Battleship extends GamePhase {\r\n    #statuses = {\r\n        isGameEnded: false,\r\n        isGameStarted: false,\r\n    };\r\n\r\n    constructor(player1, player2, mode) {\r\n        super(player1, player2);\r\n        this.mode = mode;\r\n    }\r\n\r\n    async playRound(coordinates) {\r\n        if (this.isGameEnded || !this.isGameStarted) return false;\r\n\r\n        const attackResultData = this.activePlayer.attack(this.inactivePlayer.gameboard, coordinates);\r\n        if (!attackResultData) return;\r\n\r\n        const { status } = attackResultData;\r\n\r\n        pubsub.publish(\"attack\", {\r\n            playerReceivingHitName: this.inactivePlayer.name,\r\n            ...attackResultData,\r\n        });\r\n\r\n        if (this.inactivePlayer.gameboard.isAllShipsSunk()) {\r\n            this.isGameEnded = true;\r\n            pubsub.publish(\"gameEnded\", this.activePlayer.name);\r\n            this.isGameStarted = false;\r\n            return `${this.activePlayer.name} won!`;\r\n        }\r\n\r\n        if (status === \"miss\") {\r\n            this.#switchTurn();\r\n        }\r\n\r\n        if (this.activePlayer.type === \"AI\") {\r\n            const guess = await this.activePlayer.generateGuess();\r\n            this.playRound(guess);\r\n        }\r\n    }\r\n\r\n    checkToStartGame() {\r\n        if (this.#isBothPlayersReady()) {\r\n            this.isGameStarted = true;\r\n\r\n            if (this.mode === \"pvp\") {\r\n                this.#switchTurn();\r\n            }\r\n\r\n            return this.isGameStarted;\r\n        }\r\n\r\n        this.#switchTurn();\r\n    }\r\n\r\n    reset() {\r\n        this.isGameEnded = false;\r\n        this.isGameStarted = false;\r\n        this.activePlayer = this.player1;\r\n        this.inactivePlayer = this.player2;\r\n\r\n        this.activePlayer.reset();\r\n        this.inactivePlayer.reset();\r\n\r\n        pubsub.publish(\"reset\", [this.activePlayer.name, this.inactivePlayer.name, this.isGameStarted]);\r\n    }\r\n\r\n    get isGameStarted() {\r\n        return this.#statuses.isGameStarted;\r\n    }\r\n\r\n    set isGameStarted(value) {\r\n        if (typeof value !== \"boolean\") return;\r\n        this.#statuses.isGameStarted = value;\r\n    }\r\n\r\n    get isGameEnded() {\r\n        return this.#statuses.isGameEnded;\r\n    }\r\n\r\n    set isGameEnded(result) {\r\n        if (typeof result !== \"boolean\") return;\r\n\r\n        this.#statuses.isGameEnded = result;\r\n    }\r\n\r\n    #switchTurn() {\r\n        const { inactivePlayer, activePlayer } = this;\r\n\r\n        this.activePlayer = inactivePlayer;\r\n        this.inactivePlayer = activePlayer;\r\n\r\n        pubsub.publish(\"takeTurn\", [this.activePlayer.name, this.inactivePlayer.name, this.isGameStarted]);\r\n    }\r\n\r\n    #isBothPlayersReady() {\r\n        return this.activePlayer.isReady() && this.inactivePlayer.isReady();\r\n    }\r\n}\r\n","import pubsub from \"../../utils/PubSub\";\r\n\r\nexport default class EventListenerManager {\r\n    #selectors;\r\n\r\n    constructor(game, ui) {\r\n        this.game = game;\r\n        this.ui = ui;\r\n\r\n        this.#selectors = {\r\n            randomBtn: document.querySelector(`.${this.ui.buttonSelectorsNames.randomBtn}`),\r\n            boards: document.querySelectorAll(`.${this.ui.boardSelectorsNames.boardRoot} > .board`),\r\n            readyBtn: document.querySelector(`.${this.ui.buttonSelectorsNames.readyBtn}`),\r\n            shipCells: document.querySelectorAll(`.${this.ui.shipSelectorsNames.shipCell}`),\r\n            shipEl: document.querySelectorAll(`.${this.ui.shipSelectorsNames.ship}`),\r\n            tryAgainBtn: document.querySelector(`.${this.ui.buttonSelectorsNames.tryAgainBtn}`),\r\n            btnGroup: document.querySelector(\".btn_group\"),\r\n        };\r\n    }\r\n\r\n    init() {\r\n        this.#selectors.randomBtn.addEventListener(\"click\", () => this.onRandomShipPlacement());\r\n        this.#selectors.readyBtn.addEventListener(\"click\", () => this.onConfirmShipsPlacement());\r\n        this.#selectors.shipEl.forEach(ship => ship.addEventListener(\"dragstart\", e => this.onDragStart(e)));\r\n        this.#selectors.btnGroup.addEventListener(\"click\", e => this.onAxisChange(e));\r\n        this.#selectors.tryAgainBtn.addEventListener(\"click\", () => this.onRestart());\r\n        this.#selectors.boards.forEach(board => {\r\n            board.addEventListener(\"click\", e => this.onPlayerAttack(e));\r\n            board.addEventListener(\"dragover\", e => e.preventDefault());\r\n            board.addEventListener(\"drop\", e => this.onDrop(e));\r\n        });\r\n        this.#selectors.shipCells.forEach(cell => {\r\n            // Apllying class and not using :hover. It's necessary to identify child element which has been dragged\r\n            cell.addEventListener(\"mouseenter\", e => e.target.classList.toggle(\"active\"));\r\n            cell.addEventListener(\"mouseleave\", e => e.target.classList.toggle(\"active\"));\r\n        });\r\n    }\r\n\r\n    onShipPlacement(coordinates, size) {\r\n        if (this.game.activePlayer.type === \"AI\") return;\r\n\r\n        const isPlaced = this.game.activePlayer.addShipToBoard(coordinates, size);\r\n\r\n        if (this.game.activePlayer.isReady()) {\r\n            this.#selectors.readyBtn.disabled = false;\r\n        }\r\n\r\n        return isPlaced;\r\n    }\r\n\r\n    onRandomShipPlacement() {\r\n        if (this.game.activePlayer.type === \"AI\") return;\r\n        this.ui.clearBoard(this.game.activePlayer.name);\r\n\r\n        this.game.activePlayer.addShipsRandomly();\r\n\r\n        if (this.game.activePlayer.isReady()) {\r\n            this.#selectors.readyBtn.disabled = false;\r\n        }\r\n    }\r\n\r\n    onPlayerAttack(e) {\r\n        if (this.game.activePlayer.type === \"AI\") return;\r\n\r\n        const { target } = e;\r\n\r\n        const boardBelonging = target.closest(`.${this.ui.boardSelectorsNames.boardRoot}`).dataset.belonging;\r\n        if (boardBelonging !== this.game.inactivePlayer.name) return;\r\n\r\n        if (target.matches(`.${this.ui.boardSelectorsNames.boardCell}`)) {\r\n            const clickedCellCoordinates = target.getAttribute(\"data-coordinate\");\r\n\r\n            this.game.playRound(clickedCellCoordinates);\r\n        }\r\n    }\r\n\r\n    onConfirmShipsPlacement() {\r\n        this.ui.hideBlockedCells(this.game.activePlayer.name);\r\n        this.game.checkToStartGame();\r\n        if (this.game.isGameStarted) {\r\n            this.disableRandomBtn();\r\n        }\r\n\r\n        this.toggleReadyBtn();\r\n    }\r\n\r\n    onDragStart(e) {\r\n        // Getting cells of dragging ship\r\n        const [...childrens] = e.target.children;\r\n        const findActiveCellIndex = child => child.matches(\".active\");\r\n        const activeCellIndex = childrens.findIndex(findActiveCellIndex);\r\n\r\n        // Passing activeCell\r\n        e.dataTransfer.setData(\"active\", activeCellIndex);\r\n        e.dataTransfer.setData(\"length\", e.target.dataset.length);\r\n        e.dataTransfer.setData(\"axis\", e.target.dataset.axis);\r\n    }\r\n\r\n    onDrop(e) {\r\n        e.preventDefault();\r\n\r\n        if (this.game.isGameStarted) return;\r\n        // Checking if board where drop happens belong to active player\r\n        const board = e.target.closest(`.${this.ui.boardSelectorsNames.boardRoot}`);\r\n        if (board.dataset.belonging !== this.game.activePlayer.name) return;\r\n\r\n        const activeCellIndex = e.dataTransfer.getData(\"active\");\r\n        const shipLength = e.dataTransfer.getData(\"length\");\r\n        const axis = e.dataTransfer.getData(\"axis\");\r\n        const [y, x] = e.target.dataset.coordinate.split(\",\");\r\n\r\n        // Preventing offset ship placement\r\n        if (activeCellIndex === \"-1\") return;\r\n\r\n        // Searching for first coordinate where start of the ship will be, to place it with offset correctly\r\n        const activeAxis = axis === \"horizontal\" ? x : y;\r\n        const firstCoordinateOfShip = activeAxis - activeCellIndex;\r\n\r\n        if (firstCoordinateOfShip < 0) return;\r\n\r\n        const coordinatesToPlaceTo = [];\r\n\r\n        for (let i = 0; i < shipLength; i += 1) {\r\n            if (axis === \"horizontal\") {\r\n                coordinatesToPlaceTo.push([y, firstCoordinateOfShip + i].join(\",\"));\r\n            } else {\r\n                coordinatesToPlaceTo.push([firstCoordinateOfShip + i, x].join(\",\"));\r\n            }\r\n        }\r\n        this.onShipPlacement(coordinatesToPlaceTo, shipLength);\r\n    }\r\n\r\n    toggleReadyBtn() {\r\n        const readyBtn = document.querySelector(\".ready-state-btn\");\r\n        readyBtn.toggleAttribute(\"disabled\");\r\n        pubsub.publish(\"updateShipsQuantity\", this.game.activePlayer.shipsQuantity);\r\n    }\r\n\r\n    disableRandomBtn() {\r\n        this.#selectors.randomBtn.disabled = true;\r\n    }\r\n\r\n    onAxisChange(e) {\r\n        const shipWrapper = document.querySelector(\".ship-wrapper\");\r\n        const shipQuantityDivs = document.querySelectorAll(\".ship-wrapper__quantity\");\r\n\r\n        if (e.target.matches(\".vertical-axis-btn\")) {\r\n            shipQuantityDivs.forEach(div => (div.style.flexDirection = \"column-reverse\"));\r\n\r\n            shipWrapper.className = \"ship-wrapper vertical\";\r\n            this.#selectors.shipEl.forEach(ship => {\r\n                ship.className = \"ship horizontal\";\r\n                ship.dataset.axis = \"vertical\";\r\n            });\r\n        }\r\n\r\n        if (e.target.matches(\".horizontal-axis-btn\")) {\r\n            shipQuantityDivs.forEach(div => div.style.flexDirection = \"row\");\r\n\r\n            shipWrapper.className = \"ship-wrapper horizontal\";\r\n            this.#selectors.shipEl.forEach(ship => {\r\n                ship.className = \"ship vertical\";\r\n                ship.dataset.axis = \"horizontal\";\r\n            });\r\n        }\r\n    }\r\n\r\n    onTakeTurn() {\r\n        this.game.passDevice.activatePassDevice([this.game.activePlayer.name, this.game.inactivePlayer.name]);\r\n    }\r\n\r\n    onRestart() {\r\n        this.game.reset();\r\n        this.#selectors.randomBtn.disabled = false;\r\n        pubsub.publish(\"updateShipsQuantity\", this.game.activePlayer.shipsQuantity);\r\n\r\n        const gameResultDialog = document.querySelector(\".result-dialog\");\r\n        gameResultDialog.close();\r\n    }\r\n}\r\n","export default class Gameboard {\r\n    #gameboard;\r\n\r\n    #attackedCoordinates = [];\r\n\r\n    #ships = {\r\n        shipsOnBoard: 0,\r\n        // here will be placed ship identificator and it's surrounding cells\r\n    };\r\n\r\n    static #createBoard(rows, cols) {\r\n        return [...Array(rows)].map(() => Array(cols).fill(\"?\"));\r\n    }\r\n\r\n    static #isInputValid(coordinates) {\r\n        const coordinatesRegExp = /\\d+,\\d+/gm;\r\n        return typeof coordinates === \"string\" && coordinatesRegExp.test(coordinates);\r\n    }\r\n\r\n    constructor(rows, cols) {\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n        this.#gameboard = Gameboard.#createBoard(this.rows, this.cols);\r\n    }\r\n\r\n    placeShip(coordinates, ship) {\r\n        if (coordinates.length !== ship.length) return false;\r\n        if (!this.#isCoordinatesOverflow(coordinates)) return false;\r\n        if (!this.#isCoordinatesFree(coordinates)) return false;\r\n\r\n        coordinates.forEach(coordinate => {\r\n            const separatedNums = coordinate.split(\",\");\r\n            const [x, y] = separatedNums;\r\n\r\n            this.#gameboard[x][y] = ship;\r\n        });\r\n\r\n        this.#ships.shipsOnBoard += 1;\r\n\r\n        const blockedCells = this.#surroundShipWithBlockedCells(coordinates);\r\n        // Will be used to surround ship when it is destroyed or placed\r\n        this.#ships[ship.identificator] = {\r\n            blockedCells,\r\n            shipCoordinates: coordinates,\r\n        };\r\n\r\n        return [coordinates, blockedCells];\r\n    }\r\n\r\n    receiveAttack(coordinates) {\r\n        if (!Gameboard.#isInputValid(coordinates)) return;\r\n        const [x, y] = coordinates.split(\",\");\r\n\r\n        if (!this.#isCellValid(x, y)) return;\r\n        if (this.#attackedCoordinates.includes(coordinates)) return;\r\n\r\n        const cell = this.getCell(x, y);\r\n        this.#attackedCoordinates.push(coordinates);\r\n\r\n        if (![\"?\", \"X\"].includes(cell)) {\r\n            // If we hit then this cell is a ship\r\n            const ship = cell;\r\n            ship.hit();\r\n\r\n            if (ship.isSunk()) {\r\n                this.#ships.shipsOnBoard -= 1;\r\n                this.#gameboard[x][y] = \"X\";\r\n\r\n                // If ship is sunk, surrounding it with blockedCells, player can't attack those cells anymore\r\n                const shipBlockingCells = this.#ships[ship.identificator].blockedCells;\r\n                this.#attackedCoordinates.push(...shipBlockingCells);\r\n\r\n                return { status: \"sunk\", blockedCells: shipBlockingCells };\r\n            }\r\n            // after hitting not hitting, cell becomes unavailable\r\n            this.#gameboard[x][y] = \"X\";\r\n            return { status: \"hit\", blockedCells: null };\r\n        }\r\n\r\n        return { status: \"miss\", blockedCells: null };\r\n    }\r\n\r\n    isAllShipsSunk() {\r\n        return this.#ships.shipsOnBoard === 0;\r\n    }\r\n\r\n    getCell(x, y) {\r\n        if (!this.#isCellValid(x, y)) return null;\r\n\r\n        return this.#gameboard[x][y];\r\n    }\r\n\r\n    clearBoard() {\r\n        this.#gameboard = Gameboard.#createBoard(this.rows, this.cols);\r\n        this.#attackedCoordinates = [];\r\n        this.#ships = {\r\n            shipsOnBoard: 0,\r\n        };\r\n    }\r\n\r\n    get myBattleField() {\r\n        return this.#gameboard;\r\n    }\r\n\r\n    get quantityOfShips() {\r\n        return this.#ships.shipsOnBoard;\r\n    }\r\n\r\n    #getSurroundingShipCells(coordinates) {\r\n        const SHIP_MOVES_OFFSETS = [\r\n            [-1, -1],\r\n            [-1, 0],\r\n            [-1, 1],\r\n            [0, -1],\r\n            [0, 1],\r\n            [1, -1],\r\n            [1, 0],\r\n            [1, 1],\r\n        ];\r\n\r\n        const allPossibleCoordinates = SHIP_MOVES_OFFSETS.reduce((acc, [x, y]) => {\r\n            coordinates.forEach(coordinate => {\r\n                const separatedCoordinates = coordinate.split(\",\");\r\n                let [newX, newY] = separatedCoordinates;\r\n\r\n                // Converting string input to number\r\n                newX = Number(newX);\r\n                newY = Number(newY);\r\n\r\n                // Filtering only valid surrounding coordinates. e.g ship placed in the corner with negative values close\r\n                if (!this.#isCellValid(x + newX, y + newY)) return;\r\n                if (![\"X\", \"?\"].includes(this.getCell(x + newX, y + newY))) return;\r\n\r\n                acc.push([x + newX, y + newY].toString());\r\n            });\r\n\r\n            return acc;\r\n        }, []);\r\n\r\n        // Removing duplicated coordinates\r\n        const set = new Set(allPossibleCoordinates);\r\n\r\n        return [...set];\r\n    }\r\n\r\n    #surroundShipWithBlockedCells(shipCoordinates) {\r\n        const cellsSurroundingShip = this.#getSurroundingShipCells(shipCoordinates);\r\n        return cellsSurroundingShip.reduce((acc, str) => {\r\n            // converting to array. After being stored in Set\r\n            const separatedNums = str.split(\",\");\r\n            const [x, y] = separatedNums;\r\n\r\n            this.#gameboard[x][y] = \"X\";\r\n\r\n            return [...acc, str];\r\n        }, []);\r\n    }\r\n\r\n    #isCoordinatesFree(inputedCoordinates) {\r\n        const freeCoordinates = inputedCoordinates.filter(coordinate => {\r\n            const separatedNums = coordinate.split(\",\");\r\n            const [x, y] = separatedNums;\r\n\r\n            const cell = this.getCell(x, y);\r\n            return cell === \"?\" && cell !== \"X\";\r\n        });\r\n        return freeCoordinates.length === inputedCoordinates.length;\r\n    }\r\n\r\n    #isCoordinatesOverflow(inputedCoordinates) {\r\n        const validCoordinates = inputedCoordinates.filter(coordinate => {\r\n            const separatedNums = coordinate.split(\",\");\r\n            const [x, y] = separatedNums;\r\n\r\n            return this.#isCellValid(x, y);\r\n        });\r\n\r\n        return validCoordinates.length === inputedCoordinates.length;\r\n    }\r\n\r\n    #isCellValid(x, y) {\r\n        return x >= 0 && x < this.rows && y >= 0 && y < this.cols;\r\n    }\r\n}\r\n","import getRandomNum from \"../../utils/randomNum\";\r\n\r\nexport default class AiBrains {\r\n    static #findDirection(firstCoords, lastCoords) {\r\n        // Destructuring only first part of coordinate => \"2,3\" => getting only 2\r\n        const [firstXCoords] = firstCoords.split(\",\");\r\n        const [lastXCoords] = lastCoords.split(\",\");\r\n        // If first number of coordinates is different that it is vertical, otherwise horizontal\r\n        return firstXCoords === lastXCoords ? \"horizontal\" : \"vertical\";\r\n    }\r\n\r\n    #brainState = {\r\n        firstHit: null,\r\n        lastHit: null,\r\n        attackDirection: null,\r\n    };\r\n\r\n    handleAttackResult(enemyBoard, attackingCoords, possibleGuesses, hitResultStatus) {\r\n        if (hitResultStatus === \"sunk\") this.resetPossibleSmartGuesses();\r\n        if (hitResultStatus === \"hit\") this.#generatePossibleSmartGuesses(enemyBoard, attackingCoords, possibleGuesses);\r\n    }\r\n\r\n    makeSmartMove() {\r\n        let guess;\r\n        let randomAxis;\r\n\r\n        // Grabbing last hit if it's defined and has vertical and horizontal coordinates to attack\r\n        if (this.#brainState.lastHit && (this.#brainState.lastHit.horizontal.length || this.#brainState.lastHit.vertical.length)) {\r\n            const { attackDirection } = this.#brainState;\r\n            randomAxis = this.#brainState.lastHit[attackDirection];\r\n\r\n            // By this time last hit will have only one direction and one coordinate\r\n            guess = randomAxis[0];\r\n\r\n            this.#brainState.lastHit[attackDirection] = [];\r\n            return guess.join(\",\");\r\n        }\r\n\r\n        // If we don't have lastHit then we random possible cell where ship might be\r\n        randomAxis = this.#getRandomAxis(this.#brainState.firstHit);\r\n        const randomAxisCoordIndex = getRandomNum(0, this.#brainState.firstHit[randomAxis].length);\r\n\r\n        guess = this.#brainState.firstHit[randomAxis][randomAxisCoordIndex];\r\n        const reducedGuesses = this.#brainState.firstHit[randomAxis].filter(coords => coords !== guess);\r\n        this.#brainState.firstHit[randomAxis] = reducedGuesses;\r\n\r\n        return guess.join(\",\");\r\n    }\r\n\r\n    resetPossibleSmartGuesses() {\r\n        this.#brainState = {\r\n            firstHit: null,\r\n            lastHit: null,\r\n            attackDirection: null,\r\n        };\r\n    }\r\n\r\n    #generatePossibleSmartGuesses(enemyGameboard, coords, aiGuesses) {\r\n        if (!this.#brainState.firstHit) {\r\n            this.#brainState.firstHit = this.#setBrainStateHit(coords, enemyGameboard, aiGuesses);\r\n        } else {\r\n            this.#brainState.lastHit = this.#setBrainStateHit(coords, enemyGameboard, aiGuesses);\r\n\r\n            const foundAttackDirection = AiBrains.#findDirection(\r\n                this.#brainState.firstHit.initialHitCoords,\r\n                this.#brainState.lastHit.initialHitCoords,\r\n            );\r\n\r\n            this.#brainState.attackDirection = foundAttackDirection;\r\n            const directionToDelete = foundAttackDirection === \"horizontal\" ? \"vertical\" : \"horizontal\";\r\n\r\n            this.#brainState.firstHit[directionToDelete] = [];\r\n            this.#brainState.lastHit[directionToDelete] = [];\r\n        }\r\n    }\r\n\r\n    get firstHit() {\r\n        return this.#brainState.firstHit;\r\n    }\r\n\r\n    get lastHit() {\r\n        return this.#brainState.lastHit;\r\n    }\r\n\r\n    #setBrainStateHit(initialHitCoords, enemyGameboard, aiGuesses) {\r\n        const [y, x] = initialHitCoords.split(\",\");\r\n        const numberX = Number(x);\r\n        const numberY = Number(y);\r\n\r\n        // Defining next possible smart moves coordinates\r\n        const [right, left, top, bottom] = [\r\n            [numberY, numberX + 1],\r\n            [numberY, numberX - 1],\r\n            [numberY + 1, numberX],\r\n            [numberY - 1, numberX],\r\n        ];\r\n\r\n        return {\r\n            initialHitCoords,\r\n            horizontal: [right, left].filter(\r\n                ([xCoords, yCoords]) => enemyGameboard.getCell(xCoords, yCoords) && !!aiGuesses.includes([xCoords, yCoords].join(\",\")),\r\n            ),\r\n            vertical: [top, bottom].filter(\r\n                ([xCoords, yCoords]) => enemyGameboard.getCell(xCoords, yCoords) && !!aiGuesses.includes([xCoords, yCoords].join(\",\")),\r\n            ),\r\n        };\r\n    }\r\n\r\n    #getRandomAxis(hitObject) {\r\n        const randomNumber = getRandomNum(0, 2);\r\n        let randomAxis = randomNumber === 1 ? \"vertical\" : \"horizontal\";\r\n\r\n        // If randomAxis is empty, we get another axis that should be filled with value\r\n        if (!hitObject[randomAxis] || !hitObject[randomAxis].length) {\r\n            randomAxis = randomAxis === \"vertical\" ? \"horizontal\" : \"vertical\";\r\n        }\r\n\r\n        return randomAxis;\r\n    }\r\n}\r\n","import Player from \"./Player\";\r\nimport getRandomNum from \"../../utils/randomNum\";\r\n\r\nexport default class AI extends Player {\r\n    #guesses;\r\n\r\n    constructor(name, gameboard, randomizer, shipsQuantity, brains) {\r\n        super(name, gameboard, randomizer, shipsQuantity);\r\n        this.type = \"AI\";\r\n        this.brains = brains;\r\n        this.#guesses = this.#initPossibleGuesses();\r\n        this.addShipsRandomly();\r\n    }\r\n\r\n    attack(enemyGameboard, attackCoordinate) {\r\n        const hitResult = enemyGameboard.receiveAttack(attackCoordinate);\r\n        if (!hitResult) return false;\r\n        let coordinatesToDelete = [attackCoordinate];\r\n\r\n        if (hitResult.status === \"sunk\") {\r\n            coordinatesToDelete = [...hitResult.blockedCells, attackCoordinate];\r\n        }\r\n\r\n        if (this.brains) {\r\n            this.brains.handleAttackResult(enemyGameboard, attackCoordinate, this.#guesses, hitResult.status);\r\n        }\r\n\r\n        this.#deleteGuess(coordinatesToDelete);\r\n\r\n        return {\r\n            coordinates: attackCoordinate,\r\n            status: hitResult.status,\r\n            blockedCells: hitResult.blockedCells,\r\n        };\r\n    }\r\n\r\n    generateGuess() {\r\n        let guess;\r\n\r\n        if (this.brains && this.brains.firstHit) {\r\n            guess = this.brains.makeSmartMove();\r\n        } else {\r\n            const randomNumber = getRandomNum(0, this.#guesses.length);\r\n            guess = this.#guesses[randomNumber];\r\n        }\r\n\r\n        // Using 'third argument' to pass guess to resolve\r\n        return new Promise(resolve => {\r\n            setTimeout(resolve, 1200, guess);\r\n        });\r\n    }\r\n\r\n    reset() {\r\n        // Calling player reset()\r\n        super.reset();\r\n\r\n        if (this.brains) {\r\n            this.brains.resetPossibleSmartGuesses();\r\n        }\r\n        this.#guesses = this.#initPossibleGuesses();\r\n        this.addShipsRandomly();\r\n    }\r\n\r\n    #initPossibleGuesses() {\r\n        // AI parsing gameboard cells to formulate possible guesses\r\n        const parsedBoard = this.gameboard.myBattleField.map((row, indexX) => row.map((_, indexY) => [indexX, indexY].join()));\r\n\r\n        return parsedBoard.flat();\r\n    }\r\n\r\n    #deleteGuess(guessesToDelete) {\r\n        const filtered = this.#guesses.filter(coordinate => !guessesToDelete.includes(coordinate));\r\n        this.#guesses = filtered;\r\n    }\r\n}\r\n","import Ship from \"../Ship/ship\";\r\nimport pubsub from \"../../utils/PubSub\";\r\n\r\nexport default class Player {\r\n    // takes instanceof Map object\r\n    #shipsQuantity;\r\n\r\n    #shipsQuantityStaticCopy;\r\n\r\n    #statuses = {\r\n        readyToStart: false,\r\n    };\r\n\r\n    constructor(name, gameboard, randomizer, shipsQuantity) {\r\n        this.name = name;\r\n        this.gameboard = gameboard;\r\n        this.randomizer = randomizer;\r\n        this.#shipsQuantity = new Map(shipsQuantity); // bound to Map\r\n        this.#shipsQuantityStaticCopy = shipsQuantity;\r\n        this.type = \"HUMAN\";\r\n    }\r\n\r\n    attack(enemyGameboard, coordinates) {\r\n        const hitResult = enemyGameboard.receiveAttack(coordinates);\r\n        if (!hitResult) return false;\r\n\r\n        return {\r\n            coordinates: coordinates,\r\n            status: hitResult.status,\r\n            blockedCells: hitResult.blockedCells,\r\n        };\r\n    }\r\n\r\n    addShipToBoard(coordinates, size) {\r\n        // Checking if player still have this ship size\r\n        if (this.#shipsQuantity.get(size.toString()) === 0) return false;\r\n\r\n        const placedValues = this.gameboard.placeShip(coordinates, new Ship(size));\r\n        if (!placedValues) return;\r\n\r\n        const [placedShipCoordinates, blockedCoordinates] = placedValues;\r\n\r\n        if (placedShipCoordinates) {\r\n            pubsub.publish(\"addShip\", {\r\n                placedShipCoordinates,\r\n                blockedCoordinates,\r\n                name: this.name,\r\n            });\r\n            this.#reduceShipsByOne(size);\r\n            pubsub.publish(\"updateShipsQuantity\", this.shipsQuantity);\r\n        }\r\n\r\n        return [placedShipCoordinates, blockedCoordinates];\r\n    }\r\n\r\n    addShipsRandomly() {\r\n        if (!this.randomizer) throw new Error(\"Can't place ship randomly if randomizer undefined\");\r\n\r\n        // Redeclaring shipsQuantity during each usage of this func\r\n        this.#shipsQuantity = new Map(this.#shipsQuantityStaticCopy);\r\n        this.gameboard.clearBoard();\r\n\r\n        for (const [shipSize, numberOfShips] of this.#shipsQuantity) {\r\n            for (let i = 0; i !== numberOfShips; i += 1) {\r\n                const randomCoordinates = this.randomizer.generateRandomCoordinates(shipSize);\r\n                const shipCoordinates = this.addShipToBoard(randomCoordinates, shipSize);\r\n                this.randomizer.deleteShipPlacements(shipCoordinates);\r\n            }\r\n        }\r\n\r\n        this.randomizer.resetAvailableCoordinates();\r\n    }\r\n\r\n    // Player will be considered \"ready\" if all his ships are placed\r\n    isReady() {\r\n        // Getting ship quantities of every ship\r\n        const shipNumbers = [...this.#shipsQuantity.values()];\r\n        const isEveryShipPlaced = shipNumbers.every(ship => ship === 0);\r\n\r\n        if (isEveryShipPlaced) this.#statuses.readyToStart = true;\r\n\r\n        return this.#statuses.readyToStart;\r\n    }\r\n\r\n    reset() {\r\n        this.gameboard.clearBoard();\r\n        this.#shipsQuantity = new Map(this.#shipsQuantityStaticCopy);\r\n        this.#statuses.readyToStart = false;\r\n    }\r\n\r\n    get shipsQuantity() {\r\n        return this.#shipsQuantity;\r\n    }\r\n\r\n    #reduceShipsByOne(size) {\r\n        const strSize = size.toString();\r\n        if (!strSize) return \"Can't convert to str\";\r\n\r\n        const previousValue = this.#shipsQuantity.get(strSize);\r\n        this.#shipsQuantity.set(strSize, previousValue - 1);\r\n    }\r\n}\r\n","import getRandomNum from \"../../utils/randomNum\";\r\n\r\nexport default class ShipRandomizer {\r\n    static #traverseAllPossibleCoordinates(x, y) {\r\n        const rowsTwo = [\r\n            [x, y],\r\n            [x, y + 1],\r\n        ];\r\n        const rowsThree = [...rowsTwo, [x, y + 2]];\r\n        const rowsFour = [...rowsThree, [x, y + 3]];\r\n\r\n        const colsTwo = [\r\n            [x, y],\r\n            [x + 1, y],\r\n        ];\r\n        const colsThree = [...colsTwo, [x + 2, y]];\r\n        const colsFour = [...colsThree, [x + 3, y]];\r\n\r\n        return {\r\n            rows: [[[x, y]], rowsTwo, rowsThree, rowsFour],\r\n            cols: [[[x, y]], colsTwo, colsThree, colsFour],\r\n        };\r\n    }\r\n\r\n    constructor(rows, cols) {\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n        this.availableShipPlacements = this.#fillRandomShipPlacements(this.cols, this.rows);\r\n\r\n        // Copy needed to reset availableShipPlacements to default values, to not make another calculations;\r\n        this.copy = JSON.parse(JSON.stringify(this.availableShipPlacements));\r\n    }\r\n\r\n    generateRandomCoordinates(shipSize) {\r\n        // getting array of available coordinates for inputed shipSize\r\n        const shipAvailableCoordinates = this.availableShipPlacements[shipSize];\r\n        const maxNumToRandomize = shipAvailableCoordinates.length;\r\n        const randomNum = getRandomNum(0, maxNumToRandomize);\r\n\r\n        return shipAvailableCoordinates[randomNum];\r\n    }\r\n\r\n    deleteShipPlacements(deletingCoordinates) {\r\n        if (!(deletingCoordinates instanceof Array)) return;\r\n\r\n        // deletingCoordinates include shipPlacement and cells around the ship\r\n        const joinedDeletingCoordinates = deletingCoordinates.flat();\r\n        const availableCoordinatesEntries = Object.entries(this.availableShipPlacements);\r\n\r\n        for (const [length, coordinate] of availableCoordinatesEntries) {\r\n            // deleting used coordinates\r\n            const unusedCoordinates = coordinate.filter(arr => !arr.some(value => joinedDeletingCoordinates.includes(value)));\r\n            this.availableShipPlacements[length] = unusedCoordinates;\r\n        }\r\n    }\r\n\r\n    resetAvailableCoordinates() {\r\n        // Rerunning #fillRandomShipPlacements will spike CPU usage. Making deep clone instead\r\n        this.availableShipPlacements = JSON.parse(JSON.stringify(this.copy));\r\n    }\r\n\r\n    #fillRandomShipPlacements(boardCols, boardRows) {\r\n        const shipPlacements = {\r\n            4: [],\r\n            3: [],\r\n            2: [],\r\n            1: [],\r\n        };\r\n\r\n        for (let i = 0; i < boardCols; i += 1) {\r\n            for (let j = 0; j < boardRows; j += 1) {\r\n                const allCoordinates = ShipRandomizer.#traverseAllPossibleCoordinates(i, j);\r\n\r\n                const validRows = allCoordinates.rows.filter(row => this.#isCoordinatesValid(row));\r\n                const validCols = allCoordinates.cols.filter(col => this.#isCoordinatesValid(col));\r\n\r\n                const validCoordinates = [...validRows, ...validCols];\r\n\r\n                // Filling up availableShipPlacements object\r\n                validCoordinates.forEach(coordinate => {\r\n                    const shipLength = coordinate.length;\r\n                    const coordinatesToStr = coordinate.reduce((acc, el) => [...acc, el.toString()], []);\r\n                    shipPlacements[shipLength].push(coordinatesToStr);\r\n                });\r\n            }\r\n        }\r\n\r\n        return shipPlacements;\r\n    }\r\n\r\n    #isCoordinatesValid(inputedCoordinates) {\r\n        const validCoordinates = inputedCoordinates.filter(([x, y]) => x >= 0 && x < this.rows && y >= 0 && y < this.cols);\r\n        return validCoordinates.length === inputedCoordinates.length;\r\n    }\r\n}\r\n","export default class Ship {\r\n    static shipsCreated = 0;\r\n\r\n    #hitTimes = 0;\r\n\r\n    #sunk = false;\r\n\r\n    constructor(length) {\r\n        this.length = Number(length);\r\n        this.identificator = Ship.shipsCreated.toString();\r\n\r\n        Ship.shipsCreated += 1;\r\n    }\r\n\r\n    get hitTimes() {\r\n        return this.#hitTimes;\r\n    }\r\n\r\n    hit() {\r\n        this.#hitTimes += 1;\r\n        this.isSunk();\r\n    }\r\n\r\n    isSunk() {\r\n        if (this.#hitTimes === this.length) {\r\n            this.#sunk = true;\r\n        }\r\n        return this.#sunk;\r\n    }\r\n}\r\n","import pubsub from \"../../utils/PubSub\";\r\n\r\nexport default class BoardUI {\r\n    static createBoardWrapper(className, name) {\r\n        const boardWrapperEl = document.createElement(\"div\");\r\n        boardWrapperEl.className = className;\r\n        boardWrapperEl.setAttribute(\"data-belonging\", name);\r\n\r\n        const playerTag = document.createElement(\"div\");\r\n        playerTag.textContent = name;\r\n        playerTag.className = \"player-tag\";\r\n\r\n        boardWrapperEl.append(playerTag);\r\n\r\n        return boardWrapperEl;\r\n    }\r\n\r\n    static createBoardRow(className) {\r\n        const rowEl = document.createElement(\"div\");\r\n        rowEl.className = className;\r\n\r\n        return rowEl;\r\n    }\r\n\r\n    static createBoardCell(className, coordinate) {\r\n        const cellEl = document.createElement(\"div\");\r\n        cellEl.className = className;\r\n        cellEl.setAttribute(\"data-coordinate\", coordinate);\r\n\r\n        return cellEl;\r\n    }\r\n\r\n    static createAxisWithLettersOrNumbers(arr, axis) {\r\n        const div = document.createElement(\"div\");\r\n        div.className = `axis-cell-wrapper ${axis}`;\r\n\r\n        arr.forEach(el => {\r\n            const cell = document.createElement(\"div\");\r\n            cell.className = \"axis-cell\";\r\n            cell.textContent = el;\r\n            div.append(cell);\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    static drawShipUI(length, className) {\r\n        const shipDiv = document.createElement(\"div\");\r\n        shipDiv.setAttribute(\"data-length\", length);\r\n        shipDiv.setAttribute(\"draggable\", true);\r\n        shipDiv.setAttribute(\"data-axis\", \"horizontal\");\r\n        shipDiv.className = className;\r\n\r\n        return shipDiv;\r\n    }\r\n\r\n    static drawShipCellUI(className) {\r\n        const shipCell = document.createElement(\"div\");\r\n        shipCell.className = className;\r\n\r\n        return shipCell;\r\n    }\r\n\r\n    constructor(boardToPlaceTo) {\r\n        this.boardToPlaceTo = boardToPlaceTo;\r\n\r\n        this.boardSelectorsNames = {\r\n            boardRoot: \"board__wrapper\",\r\n            boardRow: \"board__wrapper__row\",\r\n            boardCell: \"board__cell\",\r\n        };\r\n\r\n        this.buttonSelectorsNames = {\r\n            randomBtn: \"random-ship-placement\",\r\n            readyBtn: \"ready-state-btn\",\r\n            tryAgainBtn: \"try-again_btn\",\r\n        };\r\n\r\n        this.shipSelectorsNames = {\r\n            shipCell: \"ship-cell\",\r\n            ship: \"ship\",\r\n        };\r\n\r\n        pubsub.subscribe(\"addShip\", this.displayShip.bind(this));\r\n        pubsub.subscribe(\"attack\", this.displayAttackResult.bind(this));\r\n        pubsub.subscribe(\"updateShipsQuantity\", this.displayShipsQuantity.bind(this));\r\n        pubsub.subscribe(\"gameEnded\", this.showResultDialog.bind(this));\r\n        pubsub.subscribe(\"takeTurn\", this.#highlightActivePlayer.bind(this));\r\n        pubsub.subscribe(\"reset\", this.reset.bind(this));\r\n    }\r\n\r\n    createBoard(rows, cols, playerName) {\r\n        const board = document.createElement(\"div\");\r\n        board.className = \"board\";\r\n\r\n        const axisLetters = BoardUI.createAxisWithLettersOrNumbers([\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\"], \"vertical\");\r\n        const axisNumbers = BoardUI.createAxisWithLettersOrNumbers([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], \"horizontal\");\r\n\r\n        const boardWrapper = BoardUI.createBoardWrapper(this.boardSelectorsNames.boardRoot, playerName);\r\n        boardWrapper.append(axisNumbers, axisLetters);\r\n\r\n        for (let row = 0; row <= rows - 1; row += 1) {\r\n            const boardRow = BoardUI.createBoardRow(this.boardSelectorsNames.boardRow);\r\n\r\n            for (let col = 0; col <= cols - 1; col += 1) {\r\n                const boardCell = BoardUI.createBoardCell(this.boardSelectorsNames.boardCell, `${row},${col}`);\r\n\r\n                boardRow.append(boardCell);\r\n            }\r\n            board.append(boardRow);\r\n        }\r\n        boardWrapper.append(board);\r\n        this.boardToPlaceTo.append(boardWrapper);\r\n    }\r\n\r\n    displayShip(data) {\r\n        const { placedShipCoordinates, blockedCoordinates, name } = data;\r\n        const playersBoard = document.querySelector(`[data-belonging = ${name}]`);\r\n        placedShipCoordinates.forEach(coordinate => {\r\n            const uiCell = playersBoard.querySelector(`[data-coordinate = '${coordinate}']`);\r\n            uiCell.classList.add(\"ship-placed\");\r\n        });\r\n        blockedCoordinates.forEach(cell => {\r\n            const uiCell = playersBoard.querySelector(`[data-coordinate = '${cell}']`);\r\n            uiCell.classList.add(\"blocked\");\r\n        });\r\n    }\r\n\r\n    displayAttackResult(data) {\r\n        const { coordinates, playerReceivingHitName, status, blockedCells } = data;\r\n        const playersBoard = document.querySelector(`[data-belonging = ${playerReceivingHitName}]`);\r\n        let uiCell = playersBoard.querySelector(`[data-coordinate = '${coordinates}']`);\r\n        uiCell.classList.add(status);\r\n\r\n        if (blockedCells) {\r\n            blockedCells.forEach(cell => {\r\n                uiCell = playersBoard.querySelector(`[data-coordinate = '${cell}'`);\r\n                uiCell.classList.add(\"miss\");\r\n            });\r\n        }\r\n    }\r\n\r\n    clearBoard(playerName) {\r\n        const playersBoard = document.querySelector(`[data-belonging = ${playerName}]`);\r\n\r\n        const cellsOfBoard = playersBoard.querySelectorAll(`.${this.boardSelectorsNames.boardCell}`);\r\n        cellsOfBoard.forEach(cell => {\r\n            cell.className = this.boardSelectorsNames.boardCell;\r\n        });\r\n    }\r\n\r\n    displayUI(data) {\r\n        this.createBoard(10, 10, data.firstPlayerName);\r\n        this.createBoard(10, 10, data.secondPlayerName);\r\n\r\n        const shipWrapper = this.#drawShips(data.shipsQuantity);\r\n        const btnGroup = this.#createBoardBtns();\r\n\r\n        const controlDiv = document.createElement(\"div\");\r\n        controlDiv.className = `control-group`;\r\n        controlDiv.append(shipWrapper, btnGroup);\r\n\r\n        const board = document.querySelector(`.${this.boardSelectorsNames.boardRoot}`);\r\n        board.insertAdjacentElement(\"afterend\", controlDiv);\r\n\r\n        this.#highlightActivePlayer([data.firstPlayerName, data.secondPlayerName]);\r\n\r\n        this.createResultDialog();\r\n    }\r\n\r\n    displayShipsQuantity(shipsQuantity) {\r\n        for (const [key, value] of shipsQuantity) {\r\n            const shipQuantity = document.querySelector(`[data-length = '${key}'] + .quantity`);\r\n            shipQuantity.textContent = `${value}`;\r\n        }\r\n    }\r\n\r\n    createResultDialog() {\r\n        const resultDialog = document.createElement(\"dialog\");\r\n        resultDialog.className = \"result-dialog\";\r\n        const dialogWrapper = document.createElement(\"div\");\r\n\r\n        const paragraph = document.createElement(\"p\");\r\n\r\n        const btn = document.createElement(\"button\");\r\n        btn.type = \"button\";\r\n        btn.className = this.buttonSelectorsNames.tryAgainBtn;\r\n        btn.textContent = \"Try again?\";\r\n\r\n        dialogWrapper.append(paragraph, btn);\r\n        resultDialog.append(dialogWrapper);\r\n\r\n        const controlGroup = document.querySelector(\".control-group\");\r\n        controlGroup.append(resultDialog);\r\n    }\r\n\r\n    showResultDialog(winnerName) {\r\n        const resultDialog = document.querySelector(\".result-dialog\");\r\n        const paragraph = resultDialog.querySelector(\"p\");\r\n        paragraph.textContent = `${winnerName} has won!`;\r\n        resultDialog.show();\r\n    }\r\n\r\n    reset(data) {\r\n        const [activePlayerName, inactivePlayerName] = data;\r\n\r\n        [activePlayerName, inactivePlayerName].forEach(playerName => {\r\n            this.clearBoard(playerName);\r\n        });\r\n        this.#highlightActivePlayer([activePlayerName, inactivePlayerName]);\r\n    }\r\n\r\n    hideBlockedCells(inactivePlayerName) {\r\n        const playersBoard = document.querySelector(`[data-belonging = ${inactivePlayerName}]`);\r\n        const blockedCellsOfPlayerBoard = playersBoard.querySelectorAll(\".blocked\");\r\n        blockedCellsOfPlayerBoard.forEach(cell => {\r\n            cell.classList.remove(\"blocked\");\r\n        });\r\n    }\r\n\r\n    #drawShips(shipsData) {\r\n        // Function accept array of arrays [[\"4\", 1]] or Map object\r\n        const shipWrapper = document.createElement(\"div\");\r\n        shipWrapper.className = \"ship-wrapper horizontal\";\r\n\r\n        for (const [shipSize, quantity] of shipsData) {\r\n            const shipWrapperQuantity = document.createElement(\"div\");\r\n            shipWrapperQuantity.className = \"ship-wrapper__quantity\";\r\n            const span = document.createElement(\"span\");\r\n            span.className = \"quantity\";\r\n            span.textContent = `${quantity}`;\r\n\r\n            const shipDiv = BoardUI.drawShipUI(shipSize, `${this.shipSelectorsNames.ship} vertical`);\r\n            for (let j = 0; j < shipSize; j += 1) {\r\n                const shipCell = BoardUI.drawShipCellUI(`cell ${this.shipSelectorsNames.shipCell}`);\r\n                shipDiv.append(shipCell);\r\n            }\r\n            shipWrapperQuantity.append(shipDiv, span);\r\n            shipWrapper.append(shipWrapperQuantity);\r\n        }\r\n        return shipWrapper;\r\n    }\r\n\r\n    #createBoardBtns() {\r\n        const div = document.createElement(\"div\");\r\n        div.className = \"btn_group\";\r\n\r\n        div.innerHTML = `\r\n            <button class=${this.buttonSelectorsNames.randomBtn} type=\"button\">Randomize ships</button>\r\n            <button class=${this.buttonSelectorsNames.readyBtn} type=\"button\" disabled=true>Ready</button>\r\n            <button class=\"horizontal-axis-btn\" type=\"button\">\r\n                <i class=\"fa-solid fa-left-right\" style=\"color:#fff\"></i>\r\n            </button>\r\n            <button class=\"vertical-axis-btn\" type=\"button\">\r\n                <i class=\"fa-solid fa-up-down\" style=\"color:#fff\"></i>\r\n            </button>`;\r\n\r\n        return div;\r\n    }\r\n\r\n    #highlightActivePlayer(data) {\r\n        const [activePlayerName, inactivePlayerName] = data;\r\n\r\n        const playerTagActive = document.querySelector(`[data-belonging = '${activePlayerName}'] > .player-tag`);\r\n        playerTagActive.classList.add(\"highlight\");\r\n\r\n        this.#removeHighlight(inactivePlayerName);\r\n    }\r\n\r\n    #removeHighlight(playerName) {\r\n        const playerTagInactive = document.querySelector(`[data-belonging = '${playerName}'] > .player-tag`);\r\n        playerTagInactive.classList.remove(\"highlight\");\r\n    }\r\n}\r\n","import Gameboard from \"../Gameboard/gameboard\";\r\nimport ShipRandomizer from \"../Randomizer/ShipRandomizer\";\r\nimport Player from \"../Player/Player\";\r\nimport AI from \"../Player/AiPlayer\";\r\nimport AiBrains from \"../Player/AiBrains\";\r\nimport PassDevice from \"./passDevice\";\r\nimport Battleship from \"../Battleship/ActivePhase\";\r\nimport BoardUI from \"./BoardUI\";\r\nimport GameDisplayManager from \"../Controller/GameDisplayManager\";\r\n\r\nexport default class StartScreenManager {\r\n    static #toggleCircle(e) {\r\n        const { target } = e;\r\n        const toggleValueState = target.getAttribute(\"data-value\");\r\n        toggleValueState === \"off\" ? target.setAttribute(\"data-value\", \"on\") : target.setAttribute(\"data-value\", \"off\");\r\n        target.classList.toggle(\"on\");\r\n    }\r\n\r\n    static #changeShipQuantity(e) {\r\n        const { target } = e;\r\n\r\n        if (target.matches(\".slider\")) {\r\n            const parentDiv = target.closest(\".slider-mini-group\");\r\n            const sliderOutput = parentDiv.querySelector(\"output\");\r\n\r\n            sliderOutput.textContent = target.value;\r\n        }\r\n    }\r\n\r\n    static #initGame(e, dialogSelectedData) {\r\n        const { target } = e;\r\n        const ROWS = 10;\r\n        const COLS = 10;\r\n\r\n        let passDevice;\r\n        let aiBrains;\r\n        let mode;\r\n\r\n        if (dialogSelectedData.aiBrains === \"on\") {\r\n            aiBrains = new AiBrains();\r\n        }\r\n\r\n        const gameboard1 = new Gameboard(ROWS, COLS);\r\n        const gameboard2 = new Gameboard(ROWS, COLS);\r\n        const randomizer = new ShipRandomizer(ROWS, COLS);\r\n        const player1 = new Player(\"P1\", gameboard1, randomizer, dialogSelectedData.shipsQuantity);\r\n        let player2;\r\n\r\n        if (target.matches(\".mode_btn\")) {\r\n            mode = target.getAttribute(\"data-mode\");\r\n\r\n            if (mode === \"pvp\") {\r\n                player2 = new Player(\"P2\", gameboard2, randomizer, dialogSelectedData.shipsQuantity);\r\n                passDevice = new PassDevice();\r\n            } else {\r\n                player2 = new AI(\"AI\", gameboard2, randomizer, dialogSelectedData.shipsQuantity, aiBrains);\r\n            }\r\n        }\r\n        if (player2.type === \"AI\") passDevice = null; // ??? IF I have mode\r\n        const game = new Battleship(player1, player2, mode);\r\n\r\n        const domPlayField = document.querySelector(\".play-field\");\r\n        const boardUI = new BoardUI(domPlayField);\r\n\r\n        boardUI.displayUI({\r\n            firstPlayerName: player1.name,\r\n            secondPlayerName: player2.name,\r\n            shipsQuantity: dialogSelectedData.shipsQuantity,\r\n        });\r\n\r\n        if (passDevice) {\r\n            passDevice.init();\r\n        }\r\n\r\n        const controller = new GameDisplayManager(game, boardUI);\r\n        controller.init();\r\n    }\r\n\r\n    static #getDialogSelectedData() {\r\n        const [fourCell, threeCell, twoCell, oneCell] = document.querySelectorAll(\"output\");\r\n        const aiBrains = document.querySelector(\".circle\");\r\n\r\n        return {\r\n            shipsQuantity: [\r\n                [\"4\", Number(fourCell.value)],\r\n                [\"3\", Number(threeCell.value)],\r\n                [\"2\", Number(twoCell.value)],\r\n                [\"1\", Number(oneCell.value)],\r\n            ],\r\n            aiBrains: aiBrains.getAttribute(\"data-value\"),\r\n        };\r\n    }\r\n\r\n    static initListeners() {\r\n        const selectors = {\r\n            dialog: document.querySelector(\"dialog\"),\r\n            circle: document.querySelector(\".circle\"),\r\n            rangeElements: document.querySelectorAll(\"input[type='range']\"),\r\n            slidersGroup: document.querySelector(\".sliders-group\"),\r\n            modeSelectionEl: document.querySelector(\".mode-selection__btn-group\"),\r\n        };\r\n\r\n        selectors.circle.addEventListener(\"click\", e => StartScreenManager.#toggleCircle(e));\r\n        selectors.slidersGroup.addEventListener(\"input\", e => StartScreenManager.#changeShipQuantity(e));\r\n        window.addEventListener(\"DOMContentLoaded\", () => selectors.dialog.show());\r\n        selectors.modeSelectionEl.addEventListener(\"click\", e => {\r\n            if (e.target.matches(\".mode_btn\")) {\r\n                StartScreenManager.#initGame(e, StartScreenManager.#getDialogSelectedData());\r\n                selectors.dialog.close();\r\n            }\r\n        });\r\n    }\r\n}\r\n","import pubsub from \"../../utils/PubSub\";\r\n\r\nexport default class PassDevice {\r\n    #stash = {};\r\n\r\n    #playersNames = {\r\n        activePlayerName: null,\r\n        inactivePlayerName: null,\r\n    };\r\n\r\n    init() {\r\n        pubsub.subscribe(\"takeTurn\", this.activatePassDevice.bind(this));\r\n        pubsub.subscribe(\"takeTurn\", this.#updatePlayersStatuses.bind(this));\r\n        // pubsub.subscribe(\"endGame\", this.#reset.bind(this));\r\n        pubsub.subscribe(\"reset\", this.#reset.bind(this));\r\n\r\n        this.#createDialog();\r\n    }\r\n\r\n    activatePassDevice([activePlayerName, inactivePlayerName, isGameStarted]) {\r\n        if (!isGameStarted) {\r\n            this.#blurBoard(inactivePlayerName);\r\n            this.#unBlurBoard(activePlayerName);\r\n        } else {\r\n            this.#blurBoard(inactivePlayerName);\r\n            this.#blurBoard(activePlayerName);\r\n            this.#updateTextInMessageBox(activePlayerName);\r\n            this.#toggleDialog();\r\n        }\r\n\r\n        this.#stash[inactivePlayerName] = {\r\n            blockedCells: [],\r\n            shipCells: [],\r\n        };\r\n\r\n        this.#hideCells(inactivePlayerName);\r\n    }\r\n\r\n    #createDialog() {\r\n        const passDeviceDialog = document.createElement(\"dialog\");\r\n        passDeviceDialog.className = \"pass-device-dialog\";\r\n\r\n        const wrapper = document.createElement(\"div\");\r\n\r\n        const btn = document.createElement(\"button\");\r\n        btn.type = \"button\";\r\n        btn.className = \"continue-btn\";\r\n        btn.textContent = \"Continue\";\r\n\r\n        btn.addEventListener(\"click\", () => {\r\n            this.#revealCells(this.#playersNames.activePlayerName);\r\n            this.#unBlurBoard(this.#playersNames.activePlayerName);\r\n            this.#unBlurBoard(this.#playersNames.inactivePlayerName);\r\n            this.#updateTextInMessageBox();\r\n            this.#toggleDialog();\r\n        });\r\n\r\n        const messageDiv = document.createElement(\"div\");\r\n        messageDiv.className = \"message-box\";\r\n\r\n        wrapper.append(messageDiv, btn);\r\n        passDeviceDialog.append(wrapper);\r\n\r\n        const controlGroup = document.querySelector(\".control-group\");\r\n        controlGroup.append(passDeviceDialog);\r\n    }\r\n\r\n    #toggleDialog() {\r\n        const dialog = document.querySelector(\".pass-device-dialog\");\r\n        dialog.toggleAttribute(\"open\");\r\n    }\r\n\r\n    #hideCells(inactivePlayerName) {\r\n        const playersBoard = document.querySelector(`[data-belonging = ${inactivePlayerName}]`);\r\n        const shipCellsOfPlayerBoard = playersBoard.querySelectorAll(\".ship-placed\");\r\n        const blockedCellsOfPlayerBoard = playersBoard.querySelectorAll(\".blocked\");\r\n\r\n        if (!this.#stash[inactivePlayerName]) {\r\n            this.#stash[inactivePlayerName] = {\r\n                shipCells: null,\r\n                blockedCells: null,\r\n            };\r\n        }\r\n\r\n        shipCellsOfPlayerBoard.forEach(cell => {\r\n            this.#stash[inactivePlayerName].shipCells.push(cell.dataset.coordinate);\r\n            cell.classList.remove(\"ship-placed\");\r\n        });\r\n        blockedCellsOfPlayerBoard.forEach(cell => {\r\n            this.#stash[inactivePlayerName].blockedCells.push(cell.dataset.coordinate);\r\n            // cell.classList.remove(\"blocked\");\r\n        });\r\n    }\r\n\r\n    #revealCells(activePlayerName) {\r\n        const playersBoard = document.querySelector(`[data-belonging = ${activePlayerName}]`);\r\n\r\n        this.#stash[activePlayerName].shipCells.forEach(stashedCell => {\r\n            const shipCell = playersBoard.querySelector(`[data-coordinate = '${stashedCell}']`);\r\n            shipCell.classList.add(\"ship-placed\");\r\n        });\r\n    }\r\n\r\n    #blurBoard(inactivePlayerName) {\r\n        const inactivePlayerBoard = document.querySelector(`[data-belonging = '${inactivePlayerName}']`);\r\n        inactivePlayerBoard.classList.add(\"blur\");\r\n    }\r\n\r\n    #unBlurBoard(activePlayerName) {\r\n        const inactivePlayerBoard = document.querySelector(`[data-belonging = '${activePlayerName}']`);\r\n        inactivePlayerBoard.classList.remove(\"blur\");\r\n    }\r\n\r\n    #updatePlayersStatuses([activePlayerName, inactivePlayerName]) {\r\n        this.#playersNames = {\r\n            activePlayerName: activePlayerName,\r\n            inactivePlayerName: inactivePlayerName,\r\n        };\r\n    }\r\n\r\n    #updateTextInMessageBox(playerName) {\r\n        const messageBox = document.querySelector(\".message-box\");\r\n\r\n        if (!playerName) {\r\n            messageBox.textContent = \"\";\r\n            return;\r\n        }\r\n\r\n        messageBox.textContent = `Pass device to ${playerName} and click \"Continue\"`;\r\n    }\r\n\r\n    #reset() {\r\n        this.#stash = {};\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","class PubSub {\r\n    subscribers = {};\r\n\r\n    subscribe(name, fn) {\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push(fn);\r\n    }\r\n\r\n    publish(name, data) {\r\n        if (!this.subscribers[name]) return \"No such subscriber\";\r\n        this.subscribers[name].forEach(sub => (data ? sub(data) : sub()));\r\n    }\r\n}\r\n\r\nconst pubsub = new PubSub();\r\nexport default pubsub;\r\n","export default function getRandomNum(min, max) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./styles/reset-css.css\";\r\nimport \"./styles/styles.css\";\r\nimport StartScreenManager from \"./components/UI/StartScreenManager\";\r\n\r\nStartScreenManager.initListeners();\r\n"],"names":[],"sourceRoot":""}